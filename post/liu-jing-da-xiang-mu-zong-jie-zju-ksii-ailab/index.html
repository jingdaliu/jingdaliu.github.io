<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>刘竞达项目总结@ZJU KSII AILAB | Jingda Liu&#39;s Blog</title>
<meta name="description" content="Stay Hungry
Stay Foolish">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://jingdaliu.github.io/favicon.ico?v=1558156126537">
<link rel="stylesheet" href="https://jingdaliu.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://jingdaliu.github.io">
        <img src="https://jingdaliu.github.io/images/avatar.png?v=1558156126537" class="site-logo">
        <h1 class="site-title">Jingda Liu&#39;s Blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/jingdaliu" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
          <a class="social-link" href="https://www.instagram.com/mrdadark" target="_blank">
            <i class="fab fa-twitter"></i>
          </a>
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Stay Hungry
Stay Foolish
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/jingdaliu" target="_blank">JingdaLiu</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">刘竞达项目总结@ZJU KSII AILAB</h2>
            <div class="post-date">2019-04-28</div>
            
            <div class="post-content">
              <p><img src="https://jingdaliu.github.io/post-images/1556456204124.jpeg" alt=""></p>
<p>后续会把源码放到GitHub上面。</p>
<p>人脸识别项目（年龄检测）</p>
<p>**一、**YOLO年龄检测项目汇报</p>
<p>\1. 使用检测方法进行训练</p>
<p>打标签</p>
<p>配置darknet</p>
<p>上传数据集、更改网络模型</p>
<p>对数据进行迭代计算</p>
<p>对产生模型进行测试</p>
<p>存在问题：检测正确率低</p>
<p>解决方法：使用分类的方法进行训练</p>
<p>\2. 使用分类方法进行训练</p>
<p>更改数据集格式并进行上传</p>
<p>重写网络模型</p>
<p>对数据进行迭代计算</p>
<p>对产生模型进行测试</p>
<p>使用不同来源图片进行测试</p>
<p>存在问题：分类准确率一般、训练时对数据集要求较高</p>
<p>解决方法：增加数据集的来源，尽可能包含多种特征，</p>
<h3 id="二-opencv_cascadetrain训练总结">二、opencv_cascadetrain训练总结</h3>
<h4 id="opencv支持三种特征提取训练检测">OpenCV支持三种特征提取训练检测：</h4>
<p>\1. Haar：的优势在于能更好的描述明暗变化，因此用于检测正面的人脸。</p>
<p>\2. LBP：比haar快很多倍，但是提取的准确率会低（10-20% 取决于训练对象）如果是嵌入式或者移动端的开发，推荐使用LBP。</p>
<p>\3. Hog：与其他的特征描述方法相比，HOG有很多优点。首先，由于HOG是在图像的局部方格单元上操作，所以它对图像几何的和光学的形变都能保持很好的不变性，这两种形变只会出现在更大的空间领域上。其次，在粗的空域抽样、精细的方向抽样以及较强的局部光学归一化等条件下，只要行人大体上能够保持直立的姿势，可以容许行人有一些细微的肢体动作，这些细微的动作可以被忽略而不影响检测效果。因此HOG特征是特别适合于做图像中的人体检测的。</p>
<h4 id="训练步骤">训练步骤</h4>
<p><strong>1、搜集正样本、负样本</strong></p>
<p>· 正样本：只含有目标的局部图（若是全图，则需要把目标截取出来，比如训练人脸，则把人脸从含有人脸的图片中截取出来，尺寸要一致），且背景不要太过复杂，灰度图</p>
<p>· 正样本大小：20<em>20(一般用于Haar特征)，24</em>24（LBP特征）</p>
<p>· 正样本数量：一般大于等于2000</p>
<p>· 负样本：不含目标的任何图片，灰度图</p>
<p>· 负样本大小：60*60</p>
<p>· 负样本数量：一般大于等于5000</p>
<p>· 注：正样本尺寸越小，训练的时间越短，但正样本的尺寸要保证小于负样本的尺寸</p>
<p>**2、**<strong>新建文件夹</strong></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g27oji7uk2j30bk031gm1.jpg" alt="img"></p>
<p>**3、**<strong>制作.bat文件和路径文件</strong></p>
<p>· Pos.bat</p>
<p>dir /b &gt; pos.txt</p>
<p>做出如下更改</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g27ojhruj2j305c039wev.jpg" alt="img"></p>
<p>· neg文件夹：存放负样本</p>
<p>· neg.txt</p>
<p>dir /b /s &gt; neg.txt</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g27ojk3rd2j305j03kq3k.jpg" alt="img"></p>
<p>· data文件夹：存放训练的xml格式文件</p>
<p>**4、**<strong>生成pos.vec文件</strong></p>
<p>· 使用opencv_createsamples.exe程序</p>
<p>· createsamples.bat：</p>
<p>opencv_createsamples.exe -info pos/pos.txt -vec pos.vec -num 344 -w 32 -h 32</p>
<p>pause</p>
<p>**6、**<strong>进行训练</strong></p>
<p>opencv_traincascade.exe -data data -vec pos.vec -bg neg.txt -numPos 200 -numNeg 200 -numStages 100 -w 32 -h 32 -minHitRate 0.999 maxFalseAlarmRate 0.5 -precalcValBufSize 256 -precalcIdxBufSize 256 -mode ALL</p>
<p>pause</p>
<p>numStages的参数一般默认为20，最好大于等于20，级数太小的话，训练的效果较差</p>
<p>**7、**<strong>训练结果</strong></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g27ojfsmewj3076076dgv.jpg" alt="img"></p>
<p><strong>8、进行测试</strong></p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g27ojikyl3j303k034abc.jpg" alt="img"></p>
<p>**9、**<strong>出现问题</strong></p>
<p>· 精确度过低</p>
<p>· 可以调用opencv模型识别人脸</p>
<p>· 训练时间过慢</p>
<p>10、解决方案</p>
<p>· 	增加训练层数</p>
<p>· 调试成熟模型</p>
<p>· 使用dilb+HOG进行训练</p>
<h2 id="车道线检测"><strong>车道线检测</strong></h2>
<p>车道检测是辅助驾驶和自动驾驶的重要研究内容.针对现有车道检测算法的鲁棒性和复杂度较难均衡等问题,提出一种基于多帧叠加和窗口搜索的快速车道检测算法. 首先,通过逆透视变换(IPM)把指定的感兴趣区域(ROI)转换成鸟瞰图,结合多帧叠加的方法把 RGB 图像转化成二值图.其次,根据近视场中的像素密度分布,计算当前帧的车道线起始点,并采用滑动窗口搜索的方法提取整个车道线.最后,根据车道线的特征,选择不同的车道模型,使用最小二乘法(LSE)拟合得到模型参数.大量的实际道路行驶测试结果表明,该算法能快速地检测车道线,并具有一定的鲁棒性和准确性。</p>
<p>车道线检测流程图</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1g27ojfc9s9j309s0aet9e.jpg" alt="img"></p>
<p>一、视频拆分成帧并保存为png</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g27ojgq3z4j305s06rt96.jpg" alt="img"><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g27ojg879kj305a06ymxk.jpg" alt="img"></p>
<p>效果</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1g27ojem9fpj30bb03t0tn.jpg" alt="img"></p>
<p>二、将每一帧进行灰度化</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g27ojh6ummj30a20aa75h.jpg" alt="img"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g27ojjhvdzj30cf05hjsb.jpg" alt="img"></p>
<p>三、车道线检测</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g27ojj23kxj30bq0560te.jpg" alt="img"></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://jingdaliu.github.io/tag/lVrL3Bgpz" class="tag">
                    项目总结
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://jingdaliu.github.io/post/guan-yu-zhi-ye-de-yi-xie-si-kao">
                  <h3 class="post-title">
                    关于职业的一些思考
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  
  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: '',
        owner: '',
        admin: [''],
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
